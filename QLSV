#include <bits/stdc++.h>
using namespace std;

struct sinhvien{
	string ma, ten, lop, ngaysinh;
	double gpa;
	
	void in(){
		cout << "------------------------------------------\n";
		cout << "Ma sinh vien:" << ma << endl;
		cout << "Ten sinh vien:" << ten << endl;
		cout << "Lop:" << lop << endl;
		cout << "Ngay sinh:" << ngaysinh << endl;
		cout << "GPA:" << fixed << setprecision(2) << gpa << endl;
		cout << "------------------------------------------\n"; 
	}
	
	void nhap(){
		cout <<"Nhap ma sinh vien:";cin>>ma;
		cout <<"Nhap ten sinh vien:";
		cin.ignore();
		getline(cin, ten);
		cout <<"Nhap lop:";cin>>lop;
		cout <<"Nhap ngay sinh:";cin>>ngaysinh;
		cout <<"Gpa:";cin>>gpa;
	}
};

void indanhsach(sinhvien a[], int n){
	cout <<"Thong tin danh sach sinh vien:\n";
	for(int i = 0; i < n; i++){
		a[i].in();
	}
}

void timkiemma(sinhvien a[], int n){
	string ma;
	cout <<"Nhap ma sinh vien can tim:";cin>>ma;
	for(int i = 0; i < n; i++){
		if(ma == a[i].ma){
			a[i].in(); return;
		}
	}
	cout <<"Khong tim thay sinh vien co ma vua nhap !\n";
}

void lietkegpa(sinhvien a[], int n){
	double res = 0;
	for(int i = 0; i < n; i++){
		if(a[i].gpa > res)res = a[i].gpa;
	}
	cout <<"Danh sach sinh vien co diem gpa cao nhat :\n";
	for(int i = 0; i < n; i++){
		if(res == a[i].gpa){
			a[i].in();
		}
	}
}

bool cmp1(sinhvien a, sinhvien b){
	return a.gpa > b.gpa;
}

void lietkegpa2(sinhvien a[], int n){
	vector<sinhvien> v;
	for(int i = 0; i < n; i++){
		if(a[i].gpa >= 2.5) v.push_back(a[i]);
	}
	sort(v.begin(), v.end(), cmp1);
	cout <<"Danh sach sinh vien co diem gpa >= 2.5:\n";
	
}

//hoang van anh : anhhoangvan
//nguyen van anh : anhnguyenvan

string chuanhoa(string name){
	stringstream ss(name); vector<string> v;
	string token, res = "";
	while(ss >> token){
		v.push_back(token);
	}
	res += v[v.size() - 1];
	for(int i = 0; i < v.size() -1; i++) res += v[1];
	return v[1];
}

bool cmp2(sinhvien a, sinhvien b){
	string ten1 = chuanhoa(a.ten);
	string ten2 = chuanhoa(b.ten);
	return ten1 < ten2;
}

void sapxepten(sinhvien a[], int n){
	sort(a, a + n, cmp2);
}

int main(){
	sinhvien a[1000];
	int n = 0;//luu so sinh vien
	while(1){
		cout <<"----------------MENU----------------\n";
		cout <<"1. Nhap thong tin sinh vien\n";
		cout <<"2. Hien thi toan bo danh sach sinh vien\n";
		cout <<"3. Tim kiem sinh vien theo ma\n";
		cout <<"4. Liet ke sinh vien co diem gpa cao nhat\n";
		cout <<"5. Liet ke cac sinh vien co diem gpa >= 2.5\n";
		cout <<"6. Sap xep sinh vien theo ten\n";
		cout <<"0. Thoat !\n";
		cout <<"-------------------------------------\n";
		cout <<"Nhap lua chon :";
		int luachon; cin >> luachon;
		if(luachon == 1){
			a[n].nhap();
			++n;
		}
		else if(luachon == 2){
			indanhsach(a, n);
		}
		else if(luachon == 3){
			timkiemma(a, n);
		}
		else if(luachon == 4){
			lietkegpa(a, n);
		}
		else if(luachon == 5){
			lietkegpa2(a, n);
		}
		else if(luachon == 6){
			sapxepten(a, n);
		}
		else if(luachon == 0){
			break;
		}
	}
	return 0;
}
